{% extends 'layouts/base.html' %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<div class="h-screen pt-8">
    <header class="flex justify-between items-center w-3/4 mx-auto">
      <div class="flex items-center">
        <a class="m-1 transition-colors duration-300 hover:text-sky-700" href="javascript:history.go(-1)">
          <i class="fa-solid fa-reply text-2xl"></i>
        </a>
        <h1 class="p-2 text-3xl font-bold">編輯行程資訊</h1>
      </div>
    </header>
    <section>
      <form action="{% url 'schedules:show' schedule.id %}" method="post" class="mt-8 mx-auto w-1/2">
      {% csrf_token %}
        <div>
          <h3 class="text-2xl">{{ schedule.spot_name }}</h3>
          <div class="flex my-8">
            <div class="flex flex-col w-1/3 pr-4" >
              <div class="flex flex-col mb-6">
                <label for="date" class="block font-bold text-lg">日期：</label>
                <select name="date" id="date" required="required" class="select select-bordered w-full mt-2 border-gray-400 text-lg">
                  {% for date in date_range %}
                  <option value="{{ date|date:'Y-m-d' }}" {% if date|date:'Y-m-d' == schedule.date|date:'Y-m-d' %}selected{% endif %}>{{ date|date:'Y-m-d' }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="flex flex-col mb-6">
                <label for="start_time" class="block font-bold text-lg">抵達時間：</label>
                <input type="time" name="start_time" id="start_time" required="required" class="input input-bordered w-full mt-2 text-lg border-gray-400" value="{{ schedule.start_time|time:'H:i' }}" />
              </div>
              <div  class="flex flex-col mb-6">
                <label for="start_time" class="block font-bold text-lg">離開時間：</label>
                <input type="time" name="end_time" id="end_time" required="required" class="input input-bordered w-full mt-2 text-lg border-gray-400" value="{{ schedule.end_time|time:'H:i' }}" />
              </div>
            </div>
            <div class="flex flex-col w-2/3 p-2">
              <label for="note" class="block font-bold text-lg">行程筆記：</label>
              <textarea name="note" id="note" type="text" class="textarea textarea-bordered textarea-md w-full h-full mt-2 text-lg border-gray-400">{{ schedule.note }}</textarea>
            </div>
          </div>
          <div class="flex justify-center items-center mb-20 mt-10">
          <button type="submit" class="w-full h-14 items-center p-2 text-2xl text-white text-center font-bold bg-blue-btn hover:bg-blue-dc border rounded-3xl">更新行程資訊</button>
        </div>
        </div>
      </form>
    </section>
</div>




{% comment %} 


    <form action="{% url 'schedules:show' schedule.id %}" method="post" class="mt-8">
      {% csrf_token %}

      <div class="max-w-md mx-auto flex min-h-full flex-col justify-center px-6 py-5 lg:px-10 justify-self-start">
        <div class="mb-6">
          <label for="date" class="block text-base font-bold leading-6 text-cyan-800">日期：</label>
          <select name="date" id="date" required="required" class="block w-full h-12 pl-1 mt-1 mb-3 border-gray-300 rounded-md shadow-sm form-select focus:border-indigo-600 focus:ring focus:ring-cyan-800 focus:ring-opacity-50">
            {% for date in date_range %}
                <option value="{{ date|date:'Y-m-d' }}" {% if date|date:'Y-m-d' == schedule.date|date:'Y-m-d' %}selected{% endif %}>{{ date|date:'Y-m-d' }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-6">
          <label for="spot_name" class="block text-sm font-medium leading-6 text-cyan-800 text-base font-bold">景點名稱：</label>
          <input type="text" name="spot_name" id="spot_name" required="required" class="form-input block w-full mt-1 mb-3 rounded-md border-cyan-300 shadow-sm focus:border-indigo-600 focus:ring focus:ring-cyan-800 focus:ring-opacity-50 h-12 pl-1" value="{{ schedule.spot_name }}" />
        </div>

        <div class="mb-6">
          <label for="start_time" class="block text-sm font-medium leading-6 text-cyan-800 text-base font-bold">抵達時間：</label>
          <input type="time" name="start_time" id="start_time" required="required" class="form-input block w-full mt-1 mb-3 rounded-md border-gray-300 shadow-sm focus:border-indigo-600 focus:ring focus:ring-cyan-800 focus:ring-opacity-50 h-12 pl-1" value="{{ schedule.start_time|time:'H:i' }}" />
        </div>

        <div class="mb-6">
          <label for="end_time" class="block text-sm font-medium leading-6 text-cyan-800 text-base font-bold">離開時間：</label>
          <input type="time" name="end_time" id="end_time" required="required" class="form-input block w-full mt-1 mb-3 rounded-md border-gray-300 shadow-sm focus:border-indigo-600 focus:ring focus:ring-cyan-800 focus:ring-opacity-50 h-12 pl-1" value="{{ schedule.end_time|time:'H:i' }}" />
        </div>

        <div class="mb-6">
          <label for="note" class="block text-sm font-medium leading-6 text-cyan-800 text-base font-bold">行程筆記：</label>
          <textarea name="note" id="note" type="text" class="form-input block w-full mt-1 mb-3 rounded-md border-gray-800 shadow-sm focus:border-indigo-600 focus:ring focus:ring-cyan-800 focus:ring-opacity-50 h-12 pl-1">{{ schedule.note }}</textarea>
        </div>
      </div>
      <div class="flex justify-center">
        <button class="bg-sky-800 hover:bg-sky-950 text-white font-bold py-2 px-4 rounded"><input type="submit" value="更新行程資訊" /></button>
      </div>
    </form>
  </div> {% endcomment %}

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
    flatpickr("input[type=time]", {
    enableTime: true,
    noCalendar: true,
    dateFormat: "H:i",
});
  </script>

{% endblock %}
